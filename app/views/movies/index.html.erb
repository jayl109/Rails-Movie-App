<h1>Movies</h1>

<table id="movies_table">
  <tr>
    <th>Title</th>
    <th>Average Rating</th>
    <th>Review</th>
    <th>Subscription</th>
  </tr>
  <% @movies.each do |m| %>
    <tr>

      
      <td><%= link_to m.name, movie_path(m.id) %></td>
      <td><%= m.avg_rating %></td>
      
      <td><%= button_to "Review", new_path(id: m), :class => "button medium", :method => :patch %></td>
      <% if current_viewer.movies.include? m %>
        <td><%= button_to "Unsubscribe", movies_path, :class => "button medium", :method => :get %></td>
      <% else %>
        <td><%= button_to "Subscribe", movies_path, :class => "button medium", :method => :get %></td>
      <% end %>


    </tr>
  <% end %> 
</table>

<br>
<h3>Notes</h3>
- Only critics should be able to make reviews?<br>
- <a href="../critics">Temporary link to Critics</a><br>
- Compute avg_rating; should be out of 100/integer<br>
- Extra gem of some sort (not from class/hw/proj1)